(function(i){function l(a){var b=typeof a=="object";if(b&&a.jquery!=null)return a;else if(b&&a.tagName!=null)return i(a);else if(b&&i.isArray(a))return i(a);else if(b&&a.content!=null)return l(a.content);return i.fn.viewport.defaults.content}function r(a,b){var f=i('<div class="'+b.binderClass+'"></div>'),c=i('<div class="'+b.contentClass+'"></div>');f.css({position:"absolute",overflow:"hidden"});a.css({position:"relative",overflow:"hidden"});c.css({position:"absolute"});if(b.width!=false&&b.height!=
false){c.height(b.height);c.width(b.width)}else if(b.content!=false){c.height(b.content.height());c.width(b.content.width())}b.content!=false?c.append(b.content):c.append(a.contents());f.append(c);a.append(f);var h={left:c.offset().left,top:c.offset().top},j={height:c.height(),width:c.width()},m=true,n=true,o=0,p=0;a.bind("dragstop",function(d,e){if(h.top!=e.position.top)m=false;if(h.left!=e.position.left)n=false;h.left=e.position.left;h.top=e.position.top});return{adjust:function(){var d={height:a.height(),
width:a.width()},e;if(d.height>j.height){c.css("top",0);f.height(j.height);f.css("top",Math.floor(d.height/2)-Math.floor(j.height/2))}else{e=j.height-d.height;f.height(d.height+e*2);f.css("top",-e);if(n){h.top=Math.floor(e/2);c.css("top",h.top)}else{var k=h.top- -(e-o);if(k>=0){c.css("top",k);h.top=k}}o=e}if(d.width>j.width){c.css("left",0);f.width(j.width);f.css("left",Math.floor(d.width/2)-Math.floor(j.width/2))}else{e=j.width-d.width;f.width(d.width+e*2);f.css("left",-e);if(m){h.left=Math.floor(e/
2);c.css("left",h.left)}else{d=h.left- -(e-p);if(d>=0){c.css("left",d);h.left=d}}p=e}},setContentHeight:function(d){if(d!=null){j.height=d;c.height(d)}},setContentWidth:function(d){if(d!=null){j.width=d;c.width(d)}},getContentSize:function(){return j},content:c,binder:f}}var g={},q={content:function(){return g[this.selector].content},binder:function(){return g[this.selector].binder},update:function(){g[this.selector].adjust();return this},size:function(a,b){if(a==null||b==null)return g[this.selector].getContentSize();
g[this.selector].setContentHeight(a);g[this.selector].setContentWidth(b);return this},height:function(a){if(a==null)return g[this.selector].getContentSize().height;g[this.selector].setContentHeight(a);return this},width:function(a){if(a==null)return g[this.selector].getContentSize().width;g[this.selector].setContentWidth(a);return this}};i.fn.viewport=function(a){a=a||{};var b=this.eq(0),f=this.selector;if(typeof a=="string"&&g[f]!=null&&i.isFunction(q[a]))return q[a].apply(this,Array.prototype.slice.call(arguments,
1));else{a.content=l(a);a=i.extend({},i.fn.viewport.defaults,a);g[f]=r(b,a);g[f].adjust()}return this};i.fn.viewport.defaults={binderClass:"viewportBinder",contentClass:"viewportContent",content:false,height:false,width:false}})(jQuery);